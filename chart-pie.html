<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://huudinh.github.io/assets/sass/lib.min.css">
    <style>
        #myChart {
            margin: auto;
        }

        #title,
        #data {
            display: block;
        }

        #form {
            width: 50%;
            /* margin: auto;
            text-align: center; */
        }

        /* #form input {
            margin: auto;
        } */
    </style>
</head>

<body>
    <div class="flex">
        <div id="myChart" style="width:100%; max-width:600px; height:400px;">
        </div>

        <form id="form">
            <div>
                <label for="title">Title</label>
                <input type="text" id="title">
            </div>
            <div>
                <label for="data">Data</label>
                <input type="number" id="data">
            </div>
            <button type="submit" id="submit">Gá»­i</button>
        </form>
    </div>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <script>



        let dataArray = [['Title', 'Data']];
        const renderChart = () => {
            const getvalue = localStorage.getItem('data');
            if (getvalue) {
                const parse = JSON.parse(getvalue);
                const data2 = [];
                for (let i = 0; i < parse.length; i++) {
                    data2.push(parse[i]);
                }

                google.charts.load('current', { 'packages': ['corechart'] });
                google.charts.setOnLoadCallback(drawChart);

                function drawChart() {
                    var data = google.visualization.arrayToDataTable(data2);

                    var options = {
                        title: 'World Wide Wine Production',
                        is3D: true
                    };

                    var chart = new google.visualization.PieChart(document.getElementById('myChart'));
                    chart.draw(data, options);
                }
            }
            else {
                document.getElementById('myChart').innerHTML = "No data"
            }
        }

        renderChart()

        document.getElementById('submit').addEventListener('click', function (e) {
            e.preventDefault();
            let title = document.getElementById('title').value;
            let data = document.getElementById('data').value;
            const value = [title, Number(data)];
            dataArray.push(value);
            const myJSON = JSON.stringify(dataArray);
            localStorage.setItem('data', myJSON);
            renderChart();
            document.getElementById('form').reset();
        })
    </script>
    <script>




    </script>
</body>

</html>